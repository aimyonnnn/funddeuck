<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.itwillbs.test.mapper.MakerMapper">
	
	<!-- 메이커 정보 조회하기 -->
	<select id="selectMakerInfo" resultType="com.itwillbs.test.vo.MakerVO">
		select *
			from maker
				where
					maker_idx = #{maker_idx}
	</select>
	
	<!-- 메이커 페이지 수정하기 -->
	<update id="updateMaker">
		update maker
			set
				<if test="!maker_file4.equals('')">
					maker_file4 = #{maker_file4} ,      -- 메이커 사진
				</if>
				<if test="!maker_file5.equals('')">
					maker_file5 = #{maker_file5} ,      -- 메이커 로고
				</if>
				maker_name = #{maker_name} ,	  		-- 메이커 이름		
				maker_email = #{maker_email} ,    		-- 메이커 이메일
				maker_tel = #{maker_tel} ,  	 		-- 메이커 전화번호
				maker_url = #{maker_url}		 		-- 메이커 홈페이지
			where
				maker_idx = #{maker_idx}	
	</update>
	
	<!-- 메이커 페이지 수정하기 - 파일 실시간 삭제 -->
	<delete id="deleteMakerFile">
		update maker
		  set
		    <choose>
		      <when test="fileNumber == 4">
		        maker_file4 = ''
		      </when>
		      <when test="fileNumber == 5">
		        maker_file5 = ''
		      </when>
		    </choose>
		  where
		    maker_idx = #{maker_idx}
		    and (
		      (#{fileNumber} = 4 and maker_file4 != '')
		      or (#{fileNumber} = 5 and maker_file5 != '')
		    )
	</delete>

</mapper>
